<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ثبت نام مرحله‌ای | کیومرث</title>

<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet"/>

<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Vazir',sans-serif;
  background:radial-gradient(circle at top right,#2a0a4a,#0f172a 60%);
  color:#fff;
  overflow:hidden;
  position:relative;
}
body::before{
  content:'';
  position:absolute;
  width:420px;height:420px;
  background:radial-gradient(circle,#a855f7,#7c3aed,transparent 70%);
  top:-140px;right:-140px;
  filter:blur(60px);
  opacity:0.3;
  z-index:0;
}
.card{
  width:90%;
  max-width:420px;
  padding:45px 30px;
  border-radius:30px;
  background:rgba(255,255,255,0.07);
  backdrop-filter:blur(15px);
  box-shadow:0 0 25px rgba(168,85,247,0.18),0 20px 50px rgba(0,0,0,0.4);
  position:relative; z-index:2;
  display:flex; flex-direction:column; align-items:center;
}
h2{text-align:center;margin-bottom:25px;font-weight:700}
input,select{width:100%;padding:12px;margin-bottom:15px;border-radius:12px;border:1px solid rgba(255,255,255,0.15);background:rgba(255,255,255,0.12);color:#fff;font-size:14px;outline:none;font-family:'Vazir'}
input::placeholder{color:rgba(255,255,255,0.6)}
.select-wrapper{position:relative;width:100%;margin-bottom:20px;border-radius:16px;padding:1px;background:linear-gradient(135deg,#a855f7,#7c3aed)}
.select-wrapper select{width:100%;border:none;border-radius:15px;background:#0f172a;color:#fff;padding:12px;font-size:14px;appearance:none;outline:none;cursor:pointer}
.select-wrapper::after{content:"▼";position:absolute;left:15px;top:50%;transform:translateY(-50%);font-size:12px;color:#c084fc;pointer-events:none}
button{width:100%;padding:12px;border:none;border-radius:12px;background:linear-gradient(135deg,#a855f7,#7c3aed);color:#fff;font-family:'Vazir';font-size:14px;cursor:pointer;transition:.2s}
button:disabled{opacity:0.5;cursor:not-allowed}
button:hover:enabled{opacity:.85}
button:active:enabled{transform:scale(.97)}
.switch{text-align:center;margin-top:15px;font-size:13px}
.switch a{color:#c084fc;cursor:pointer;text-decoration:none}
.hidden{display:none}
@keyframes fade{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>

<div class="card">

  <!-- انتخاب نقش -->
  <div id="roleStep">
    <h2>انتخاب نقش شما</h2>
    <div class="select-wrapper">
      <select id="roleSelect">
        <option value="">انتخاب کنید...</option>
        <option value="student">دانش‌آموز / هنرجو</option>
        <option value="teacher">استاد / معلم</option>
        <option value="admin">مدیر / معاون</option>
      </select>
    </div>
    <button id="roleNext" disabled onclick="nextStep('role')">تایید</button>
  </div>

  <!-- اطلاعات اساسی -->
  <div id="basicStep" class="hidden">
    <h2>اطلاعات اساسی</h2>
    <input type="text" id="firstName" placeholder="نام">
    <input type="text" id="lastName" placeholder="نام خانوادگی">
    <input type="date" id="birthDate" placeholder="تاریخ تولد">
    <button id="basicNext" disabled onclick="nextStep('basic')">تایید</button>
  </div>

  <!-- اطلاعات تماس -->
  <div id="contactStep" class="hidden">
    <h2>اطلاعات تماس</h2>
    <input type="tel" id="phone" placeholder="شماره موبایل">
    <input type="email" id="email" placeholder="ایمیل">
    <button id="contactNext" disabled onclick="nextStep('contact')">تایید</button>
  </div>

  <!-- اطلاعات نقش دانش آموز -->
  <div id="studentStep" class="hidden">
    <h2>اطلاعات دانش‌آموز</h2>
    <div class="select-wrapper">
      <select id="studentGrade">
        <option value="">انتخاب پایه...</option>
        <option value="ابتدایی">ابتدایی</option>
        <option value="راهنمایی">راهنمایی</option>
        <option value="دبیرستان">دبیرستان</option>
      </select>
    </div>
    <div class="select-wrapper hidden" id="studentSubjectWrapper">
      <select id="studentSubject" multiple size="4"></select>
    </div>
    <div class="select-wrapper hidden" id="studentFieldWrapper">
      <select id="studentField">
        <option value="">انتخاب رشته...</option>
        <option value="ریاضی">ریاضی</option>
        <option value="تجربی">تجربی</option>
        <option value="انسانی">انسانی</option>
        <option value="فنی">فنی</option>
        <option value="کاردانش">کاردانش</option>
      </select>
    </div>
    <input type="file" id="studentIDFile" accept="image/*">
    <button id="studentSubmit" disabled onclick="finishRegister('دانش‌آموز')">ثبت نهایی</button>
  </div>

  <!-- اطلاعات استاد -->
  <div id="teacherStep" class="hidden">
    <h2>اطلاعات استاد</h2>
    <input type="text" id="teacherName" placeholder="نام">
    <input type="text" id="teacherFamily" placeholder="نام خانوادگی">
    <input type="number" id="teacherNationalCode" placeholder="کد ملی ۱۰ رقمی" maxlength="10">
    <div class="select-wrapper">
      <select id="teacherGrades" multiple size="4">
        <option value="دهم">دهم</option>
        <option value="یازدهم">یازدهم</option>
        <option value="دوازدهم">دوازدهم</option>
      </select>
    </div>
    <div class="select-wrapper">
      <select id="teacherSubjects" multiple size="4">
        <option value="ریاضی">ریاضی</option>
        <option value="فیزیک">فیزیک</option>
        <option value="شیمی">شیمی</option>
        <option value="زیست">زیست</option>
        <option value="فارسی">فارسی</option>
      </select>
    </div>
    <input type="file" id="teacherIDFile" accept="image/*">
    <button id="teacherSubmit" disabled onclick="finishRegister('استاد')">ثبت نهایی</button>
  </div>

  <!-- اطلاعات مدیر -->
  <div id="adminStep" class="hidden">
    <h2>اطلاعات مدیر / معاون</h2>
    <input type="text" id="adminName" placeholder="نام">
    <input type="text" id="adminFamily" placeholder="نام خانوادگی">
    <input type="number" id="adminNationalCode" placeholder="کد ملی ۱۰ رقمی" maxlength="10">
    <input type="text" id="schoolName" placeholder="نام مدرسه">
    <input type="number" id="studentCount" placeholder="تعداد دانش‌آموزان">
    <input type="file" id="schoolPhoto" accept="image/*">
    <button id="adminSubmit" disabled onclick="finishRegister('مدیر / معاون')">ثبت نهایی</button>
  </div>

</div>

<script>
// انتخاب نقش
const roleSelect = document.getElementById("roleSelect");
const roleNext = document.getElementById("roleNext");
roleSelect.addEventListener("change", ()=> roleNext.disabled = roleSelect.value === "");

// اطلاعات اساسی
const basicNext = document.getElementById("basicNext");
const basicFields = ["firstName","lastName","birthDate"];
basicFields.forEach(id=>{
  document.getElementById(id).addEventListener("input",()=> {
    basicNext.disabled = basicFields.some(i=>document.getElementById(i).value.trim()==="");
  });
});

// اطلاعات تماس
const contactNext = document.getElementById("contactNext");
["phone","email"].forEach(id=>{
  document.getElementById(id).addEventListener("input",()=> {
    contactNext.disabled = ["phone","email"].some(i=>document.getElementById(i).value.trim()==="");
  });
});

// مرحله بعد
function nextStep(stage){
  if(stage==="role"){
    document.getElementById("roleStep").classList.add("hidden");
    document.getElementById("basicStep").classList.remove("hidden");
  } else if(stage==="basic"){
    document.getElementById("basicStep").classList.add("hidden");
    document.getElementById("contactStep").classList.remove("hidden");
  } else if(stage==="contact"){
    document.getElementById("contactStep").classList.add("hidden");
    const role = roleSelect.value;
    if(role==="student") document.getElementById("studentStep").classList.remove("hidden");
    if(role==="teacher") document.getElementById("teacherStep").classList.remove("hidden");
    if(role==="admin") document.getElementById("adminStep").classList.remove("hidden");
  }
}

// منطق دانش آموز
const studentGrade = document.getElementById("studentGrade");
const studentFieldWrapper = document.getElementById("studentFieldWrapper");
const studentSubjectWrapper = document.getElementById("studentSubjectWrapper");
const studentSubject = document.getElementById("studentSubject");
const studentField = document.getElementById("studentField");
const studentIDFile = document.getElementById("studentIDFile");
const studentSubmit = document.getElementById("studentSubmit");

studentGrade.addEventListener("change",()=>{
  studentSubjectWrapper.classList.add("hidden");
  studentFieldWrapper.classList.add("hidden");
  studentSubject.innerHTML="";
  if(studentGrade.value==="دبیرستان") studentFieldWrapper.classList.remove("hidden");
  else if(studentGrade.value==="ابتدایی" || studentGrade.value==="راهنمایی"){
    studentSubjectWrapper.classList.remove("hidden");
    const lessons = studentGrade.value==="ابتدایی"?["فارسی","ریاضی","علوم","نگارش"]:["فارسی","ریاضی","علوم","انگلیسی"];
    lessons.forEach(l=>{
      const opt = document.createElement("option");
      opt.value=l; opt.textContent=l;
      studentSubject.appendChild(opt);
    });
  }
  checkStudentForm();
});

[studentField,studentName= document.getElementById("firstName"),studentFamily=document.getElementById("lastName")].forEach(el=>{
  if(el) el.addEventListener("input",checkStudentForm);
});
studentSubject.addEventListener("change",checkStudentForm);
studentIDFile.addEventListener("change",checkStudentForm);

function checkStudentForm(){
  const name = document.getElementById("firstName").value.trim();
  const family = document.getElementById("lastName").value.trim();
  const grade = studentGrade.value;
  const subject = (grade==="دبیرستان")? studentField.value : studentSubject.selectedOptions.length>0;
  const file = studentIDFile.files.length>0;
  studentSubmit.disabled = !(name && family && grade && subject && file);
}

function finishRegister(role){ alert("ثبت نام شما به عنوان "+role+" انجام شد!"); }
</script>

</body>
</html>
