<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ورود و ثبت نام |  کیومرث</title>
<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet"/>
<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Vazir',sans-serif;
  background:radial-gradient(circle at top right,#2a0a4a,#0f172a 60%);
  color:#fff;
  overflow:hidden;
  position:relative;
}
body::before{
  content:'';
  position:absolute;
  width:420px;height:420px;
  background:radial-gradient(circle,#a855f7,#7c3aed,transparent 70%);
  top:-140px;right:-140px;
  filter:blur(60px);
  opacity:0.3;
  z-index:0;
}
.card{
  width:90%;
  max-width:420px;
  padding:40px 30px;
  border-radius:30px;
  background:rgba(255,255,255,0.07);
  backdrop-filter:blur(15px);
  box-shadow:0 0 25px rgba(168,85,247,0.18),0 20px 50px rgba(0,0,0,0.4);
  position:relative;z-index:2;
  overflow:hidden;
}
h2{text-align:center;margin-bottom:25px;font-weight:700}
input,select{
  width:100%;
  padding:12px;
  margin-bottom:15px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.15);
  background:rgba(255,255,255,0.12);
  color:#fff;
  font-size:14px;
  outline:none;
  font-family:'Vazir'
}
input::placeholder{color:rgba(255,255,255,0.6)}
button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#a855f7,#7c3aed);
  color:#fff;
  font-family:'Vazir';
  font-size:14px;
  cursor:pointer;
  transition:.3s
}
button:disabled{opacity:.5;cursor:not-allowed}
button:hover:enabled{opacity:.85}
button:active:enabled{transform:scale(.97)}
.switch{text-align:center;margin-top:10px;font-size:13px}
.switch a{color:#c084fc;cursor:pointer;text-decoration:none}
.hidden{display:none}
.fade-in{animation:fadeIn .4s ease forwards}
.fade-out{animation:fadeOut .3s ease forwards}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeOut{from{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}
.select-wrapper{position:relative;margin-bottom:15px;padding:1px;border-radius:14px;background:linear-gradient(135deg,#a855f7,#7c3aed)}
.select-wrapper select{background:#0f172a;border:none;border-radius:13px;padding:12px;color:#fff;appearance:none}
.select-wrapper::after{content:"▼";position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#c084fc;font-size:12px}
</style>
</head>
<body>

<div class="card">

  <!-- LOGIN STEP -->
  <div id="loginBox" class="fade-in">
    <h2>ورود</h2>
    <input type="number" id="loginNationalCode" placeholder="کد ملی ۱۰ رقمی" maxlength="10">
    <button id="loginBtn" disabled onclick="login()">ادامه</button>
    <div class="switch">
      هنوز ثبت نام نکرده‌اید؟
      <a onclick="showRegister()">ثبت نام</a>
    </div>
  </div>

  <!-- REGISTER CONTAINER -->
  <div id="registerBox" class="hidden">

    <!-- ROLE STEP -->
    <div id="roleStep">
      <h2>انتخاب نقش</h2>
      <div class="select-wrapper">
        <select id="roleSelect">
          <option value="">انتخاب کنید...</option>
          <option value="student">دانش‌آموز</option>
          <option value="teacher">استاد</option>
          <option value="admin">مدیر / معاون</option>
        </select>
      </div>
      <button id="roleNext" disabled onclick="nextStep('role')">تایید</button>
    </div>

    <!-- BASIC INFO -->
    <div id="basicStep" class="hidden">
      <h2>اطلاعات اساسی</h2>
      <input type="text" id="firstName" placeholder="نام">
      <input type="text" id="lastName" placeholder="نام خانوادگی">
      <input type="date" id="birthDate">
      <button id="basicNext" disabled onclick="nextStep('basic')">تایید</button>
    </div>

    <!-- CONTACT -->
    <div id="contactStep" class="hidden">
      <h2>اطلاعات تماس</h2>
      <input type="tel" id="phone" placeholder="شماره موبایل">
      <input type="email" id="email" placeholder="ایمیل">
      <button id="contactNext" disabled onclick="nextStep('contact')">تایید</button>
    </div>

    <!-- STUDENT STEP -->
    <div id="studentStep" class="hidden">
      <h2>اطلاعات تحصیلی</h2>
      <div class="select-wrapper">
        <select id="studentGrade">
          <option value="">انتخاب پایه...</option>
          <option value="ابتدایی">ابتدایی</option>
          <option value="راهنمایی">راهنمایی</option>
          <option value="دبیرستان">دبیرستان</option>
        </select>
      </div>
      <div class="select-wrapper hidden" id="studentFieldWrapper">
        <select id="studentField">
          <option value="">انتخاب رشته...</option>
          <option value="ریاضی">ریاضی</option>
          <option value="تجربی">تجربی</option>
          <option value="انسانی">انسانی</option>
          <option value="فنی">فنی</option>
          <option value="کاردانش">کاردانش</option>
        </select>
      </div>
      <div class="select-wrapper hidden" id="studentSubjectWrapper">
        <select id="studentSubject" multiple size="4"></select>
      </div>
      <input type="file" id="studentIDFile" accept="image/*">
      <button id="studentSubmit" disabled onclick="finishRegister('دانش‌آموز')">ثبت نهایی</button>
    </div>

  </div>
</div>

<script>
// LOGIN VALIDATION
const loginInput=document.getElementById("loginNationalCode");
const loginBtn=document.getElementById("loginBtn");
loginInput.addEventListener("input",()=>{
  if(loginInput.value.length>10) loginInput.value=loginInput.value.slice(0,10);
  loginBtn.disabled=loginInput.value.length!==10;
});
function login(){ alert("ورود انجام شد ✅"); }

function showRegister(){
  const loginBox=document.getElementById("loginBox");
  loginBox.classList.remove("fade-in");
  loginBox.classList.add("fade-out");
  setTimeout(()=>{
    loginBox.classList.add("hidden");
    const reg=document.getElementById("registerBox");
    reg.classList.remove("hidden");
    reg.classList.add("fade-in");
  },300);
}

// ROLE STEP
const roleSelect=document.getElementById("roleSelect");
const roleNext=document.getElementById("roleNext");
roleSelect.addEventListener("change",()=> roleNext.disabled=roleSelect.value==="");

// BASIC STEP VALIDATION
const basicNext=document.getElementById("basicNext");
["firstName","lastName","birthDate"].forEach(id=>{
  document.getElementById(id).addEventListener("input",()=>{
    basicNext.disabled=["firstName","lastName","birthDate"].some(i=>document.getElementById(i).value.trim()==="");
  });
});

// CONTACT STEP
const contactNext=document.getElementById("contactNext");
["phone","email"].forEach(id=>{
  document.getElementById(id).addEventListener("input",()=>{
    contactNext.disabled=["phone","email"].some(i=>document.getElementById(i).value.trim()==="");
  });
});

function nextStep(step){
  if(step==="role"){
    document.getElementById("roleStep").classList.add("hidden");
    document.getElementById("basicStep").classList.remove("hidden");
  }
  else if(step==="basic"){
    document.getElementById("basicStep").classList.add("hidden");
    document.getElementById("contactStep").classList.remove("hidden");
  }
  else if(step==="contact"){
    document.getElementById("contactStep").classList.add("hidden");
    if(roleSelect.value==="student"){
      document.getElementById("studentStep").classList.remove("hidden");
    }
  }
}

// STUDENT LOGIC
const studentGrade=document.getElementById("studentGrade");
const studentFieldWrapper=document.getElementById("studentFieldWrapper");
const studentSubjectWrapper=document.getElementById("studentSubjectWrapper");
const studentSubject=document.getElementById("studentSubject");
const studentSubmit=document.getElementById("studentSubmit");

studentGrade.addEventListener("change",()=>{
  studentFieldWrapper.classList.add("hidden");
  studentSubjectWrapper.classList.add("hidden");
  studentSubject.innerHTML="";
  if(studentGrade.value==="دبیرستان"){
    studentFieldWrapper.classList.remove("hidden");
  }else if(studentGrade.value==="ابتدایی"||studentGrade.value==="راهنمایی"){
    studentSubjectWrapper.classList.remove("hidden");
    const lessons=studentGrade.value==="ابتدایی"?
      ["فارسی","ریاضی","علوم","نگارش"]:
      ["فارسی","ریاضی","علوم","انگلیسی"];
    lessons.forEach(l=>{
      const opt=document.createElement("option");
      opt.value=l; opt.textContent=l;
      studentSubject.appendChild(opt);
    });
  }
  validateStudent();
});

["studentField","studentSubject","studentIDFile"].forEach(id=>{
  document.getElementById(id).addEventListener("change",validateStudent);
});

function validateStudent(){
  const grade=studentGrade.value;
  const field=document.getElementById("studentField").value;
  const subject=studentSubject.selectedOptions.length>0;
  const file=document.getElementById("studentIDFile").files.length>0;
  const valid=(grade && file && ((grade==="دبیرستان" && field) || (grade!=="دبیرستان" && subject)));
  studentSubmit.disabled=!valid;
}

function finishRegister(role){ alert("ثبت نام شما به عنوان "+role+" انجام شد ✅"); }
</script>

</body>
</html>
